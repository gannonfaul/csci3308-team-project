from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy.contrib.loader import XPathItemLoader
from scrapy.contrib.loader.processor import Join, MapCompose
import re
from extract_courses.items import ExtractCoursesItem

class CoursesSpider(BaseSpider):
    name = "courses"
    # All the urls that the spider will scrape from:
    start_urls = [
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=CSCI',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=CSCI',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=CSCI',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=CSCI',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=CSCI',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ACCT',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=ACCT',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=ACCT',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=AIRR',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ANTH',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=ANTH',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=ANTH',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=ANTH',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=ANTH',
        'http://www.colorado.edu/catalog/2016-17/courses?page=5&subject=ANTH',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=APPM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=APPM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=APPM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=APRD',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=APRD',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ARAB',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ARCH',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=AREN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=AREN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ARSC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=ARSC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ARTF',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ARTH',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=ARTH',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=ARTH',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=ARTH',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ARTS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=ARTS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=ARTS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=ARTS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=ARTS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=5&subject=ARTS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=6&subject=ARTS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ASEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=ASEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=ASEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=ASEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=ASEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ASIA',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ASTR',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=ASTR',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=ASTR',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ATLS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=ATLS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=ATLS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ATOC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=ATOC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=ATOC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=BADM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=BAKR',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=BASE',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=BCOR',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=BMEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=BPOL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=BSLW',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=BUSM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=CAMW',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=CEES',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=CESR',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=CHEM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=CHEM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=CHEM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=CHEM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=CHEM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=5&subject=CHEM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=CHEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=CHEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=CHEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=CHEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=CHIN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=CHIN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=CHIN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=CLAS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=CLAS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=CLAS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=CLAS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=CMCI',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=CMDP',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=CMDP',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=CMDP',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=COML',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=COMM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=COMM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=COMM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=COMR',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=CSVC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=CVEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=CVEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=CVEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=CVEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=CVEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=5&subject=CVEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=6&subject=CVEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=7&subject=CVEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=8&subject=CVEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=CWCV',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=DANE',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=DNCE',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=DNCE',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=DNCE',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=DNCE',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=DNCE',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=EALC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=EBIO',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=EBIO',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=EBIO',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=EBIO',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=EBIO',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ECEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=ECEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=ECEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=ECEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=ECEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=5&subject=ECEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=6&subject=ECEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=7&subject=ECEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ECON',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=ECON',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=ECON',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=ECON',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=EDEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=EDUC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=EDUC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=EDUC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=EDUC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=EDUC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=5&subject=EDUC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=6&subject=EDUC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=7&subject=EDUC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=8&subject=EDUC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=EHON',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=EMEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=EMEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=EMUS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=EMUS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=EMUS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ENEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ENGL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=ENGL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=ENGL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=ENGL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=ENGL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=5&subject=ENGL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ENST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ENVD',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=ENVD',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=ENVD',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=ENVD',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ENVM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ENVS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=ENVS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=ENVS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ESBM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ESLG',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ETHN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=ETHN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=ETHN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=ETHN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=EVEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=FARR',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=FILM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=FILM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=FILM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=FILM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=FINN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=FNCE',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=FNCE',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=FREN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=FREN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=FREN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=FRSI',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=GEEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=GEOG',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=GEOG',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=GEOG',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=GEOG',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=GEOG',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=GEOL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=GEOL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=GEOL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=GEOL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=GEOL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=GREK',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=GRMN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=GRMN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=GRMN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=GRMN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=GRTE',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=GSAP',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=GRMN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=GSLL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=HEBR',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=HIND',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=HIST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=HIST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=HIST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=HIST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=HIST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=5&subject=HIST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=6&subject=HIST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=7&subject=HIST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=8&subject=HIST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=9&subject=HIST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=10&subject=HIST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=11&subject=HIST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=HNOR',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=HUEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=HUMN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=HUMN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=HUMN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=IAFS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=IAWP',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=INBU',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=INDO',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=INFO',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=INFO',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=INVS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=IPHY',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=IPHY',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=IPHY',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ITAL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=ITAL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=JPNS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=JPNS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=JPNS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=JRNL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=JRNL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=JRNL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=JRNL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=JWST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=JWST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=KREN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=LATN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=LAWS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=LAWS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=LAWS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=LAWS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=LAWS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=5&subject=LAWS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=6&subject=LAWS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=7&subject=LAWS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=8&subject=LAWS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=9&subject=LAWS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=10&subject=LAWS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=11&subject=LAWS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=12&subject=LAWS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=13&subject=LAWS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=14&subject=LAWS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=15&subject=LAWS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=16&subject=LAWS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=LDSP',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=LEAD',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=LGBT',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=LGTC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=LIBB',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=LIBR',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=LING',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=LING',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=LING',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=MATH',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=MATH',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=MATH',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=MATH',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=MATH',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=MBAC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=MBAX',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=MBAX',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=MBAX',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=MCDB',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=MCDB',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=MCDB',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=MCDB',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=MCDB',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=MCEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=MCEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=MCEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=MCEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=MCEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=MDST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=MDST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=MEMS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=MGMT',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=MGMT',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=MILR',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=MKTG',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=MKTG',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=MSBC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=MSBX',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=MSEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=MUEL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=MUEL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=MUSC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=MUSC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=MUSC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=MUSC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=MUSC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=5&subject=MUSC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=6&subject=MUSC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=7&subject=MUSC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=8&subject=MUSC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=MUSM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=MUSM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=NAVR',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=NORW',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=NRLN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=NRSC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=NRSC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=OPIM',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=ORMG',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=PACS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=PHIL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=PHIL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=PHIL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=PHIL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=PHIL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=PHYS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=PHYS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=PHYS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=PHYS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=PMUS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=PORT',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=PRLC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=PSCI',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=PSCI',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=PSCI',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=PSCI',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=PSCI',
        'http://www.colorado.edu/catalog/2016-17/courses?page=5&subject=PSCI',
        'http://www.colorado.edu/catalog/2016-17/courses?page=6&subject=PSCI',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=PSYC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=PSYC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=PSYC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=PSYC',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=REAL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=RLST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=RLST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=RLST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=RUSS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=RUSS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=RUSS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=SCAN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=SEWL',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=SLHS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=SLHS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=SLHS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=SLHS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=SNSK',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=SOCY',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=SOCY',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=SOCY',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=SOCY',
        'http://www.colorado.edu/catalog/2016-17/courses?page=4&subject=SOCY',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=SPAN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=SPAN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=SPAN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=SPAN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=SSIR',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=SUST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=SWED',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=TBTN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=THTR',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=THTR',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=THTR',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=THTR',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=TLEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=TLEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=TLEN',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=TMUS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=TMUS',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=WMST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=1&subject=WMST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=2&subject=WMST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=3&subject=WMST',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=WRTG',
        'http://www.colorado.edu/catalog/2016-17/courses?page=0&subject=YIDD',

    ]

    # Breakdown of fields to be scraped and stored.
    courses_list_xpath = '//*[starts-with(@id, "node-course-")]'
    item_fields = {
        'department' : "[A-Z]{4}",
        'number' : "[0-9]{4}",
        'credits' : "\([0-9]\)|\([0-9]\-[0-9]+\)",
        'name' : "\).*",
        'prerequisites' : "Requisites:.*",
        'description' : '[A-Za-z].*'
    }

    def parse(self, response):
        selector = HtmlXPathSelector(response)

        # iterate over courses
        for course in selector.select(self.courses_list_xpath):
            loader = XPathItemLoader(ExtractCoursesItem(), selector=course)

            # define processors
            loader.default_input_processor = MapCompose(unicode.strip)
            loader.default_output_processor = Join()

            # iterate over fields and add xpaths to the loader
            for field, regex in self.item_fields.iteritems():
                if field == 'department' or field == 'credits' or field == 'name' or field == 'number':
                    xpath = './/div/h2/a/text()'
                else:
                    xpath = './/div/text()'
                loader.add_xpath(field, xpath, re=regex)
            yield loader.load_item()
